generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model product {
  id             Int      @id @default(autoincrement())
  name           String   @db.VarChar(255)
  cost_price     Decimal  @db.Decimal(10, 2)
  selling_price  Decimal  @db.Decimal(10, 2)
  profit         Decimal  @db.Decimal(10, 2)
  stock_quantity Int
  created_at     DateTime @default(now())
  sale           sale[]
}

model sale {
  id          Int      @id @default(autoincrement())
  product_id  Int
  sold_by     Int
  quantity    Int
  total_price Decimal  @db.Decimal(10, 2)
  total_cost  Decimal  @db.Decimal(10, 2)
  created_at  DateTime @default(now())
  product     product  @relation(fields: [product_id], references: [id], map: "Sale_product_id_fkey")

  @@index([product_id], map: "Sale_product_id_fkey")
}

model user {
  id           Int       @id @default(autoincrement())
  name         String    @db.VarChar(255)
  email        String    @unique(map: "User_email_key")
  password     String    @db.VarChar(255)
  role         user_role @default(STAFF)
  refreshToken String?
  created_at   DateTime  @default(now())
}

enum user_role {
  ADMIN
  STAFF
}
